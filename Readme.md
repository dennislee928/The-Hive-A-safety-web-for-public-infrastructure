Rotary Global Grant Scholarship Project Brief（一頁式）
1) 專案名稱

The Hive x Anti-Fraud: Community Safety & Digital Resilience Program
（社區安全與數位韌性方案：事件回報 → 驗證 → 標準化警報 → 反詐/安全教育）

2) 對應扶輪焦點領域（Areas of Focus）

Promoting Peace（和平促進）：降低公共事件資訊混亂、恐慌擴散與衝突升級；強化社區在危機情境下的協作與信任。
扶輪國際
+1

Supporting Education（支持教育）：把安全素養/反詐/危機溝通做成可複製的課程模組與訓練包，落地到學校、社區與志工網絡。
扶輪國際

（備註：Global grant scholarship 本質仍是「資助你出國讀研究所」，所以本 brief 的設計是「學位進修 + 與 Areas of Focus 對齊的服務/訓練與可衡量成果」。
扶輪國際
+1
）

3) 問題陳述（Problem）

在高密度公共場域與線上社群中，詐騙、假訊息與突發公共安全事件常造成：

回報管道碎片化、真假難辨（延誤處置）

恐慌與謠言擴散（導致社會信任與秩序受損）

缺乏可擴散的「公民安全/數位韌性」教育與演練機制（弱勢族群更不利）

4) 方案概述（Intervention）

本方案整合兩個開源成果，形成「技術系統 + 教育訓練 + 社區治理」三件套：

A. The Hive（安全回報與警報層）

群眾/場館/校園回報 → 佐證資料 → 分級風險判定（含濫用防護、稽核）

產出 CAP（Common Alerting Protocol） 格式警報，利於跨管道發布（App/Web/Email/SMS；若有合作單位可再銜接更高層級通報）。
（CAP 作為公眾警報標準有成熟國際應用脈絡，適合做「可複製」的公共安全資訊格式化層。）

B. Anti-Fraud Platform（反詐/教育層）

詐騙樣態知識庫、案例拆解、風險提示與行動清單（playbooks）

針對不同族群（學生/通勤者/高齡者/新住民）提供教材、測驗與工作坊腳本

將「警報事件」回饋成教育內容：把真實案例轉成可教、可測、可迭代的模組

5) 主要受益者（Beneficiaries）

直接受益：通勤者、校園學生/教職員、公共場館使用者、弱勢族群（高齡者、新住民、低數位素養者）

間接受益：場館/校園管理者、在地 NGO、地方政府承辦、社區志工（含扶輪社友）

6) 合作單位型態（Partner Types）

就學地/在地端（Host）：Glasgow/Scotland 當地扶輪社、校園安全單位、NGO

母國端（International）：台北地區扶輪社、反詐/公民科技/教育 NGO、校園或社區中心

技術協力：資安社群、SRE/雲端資源贊助、可及性/多語系顧問
（全球獎助金要求 host + international 兩端共同主辦與參與，這個合作結構符合規則。
Rotary 7070
+1
）

7) KPI（可衡量成果）

教育與和平促進（人）

工作坊/訓練場次（12 個月 ≥ 12 場）

受訓人次（≥ 300），且至少覆蓋 2 種弱勢/高風險族群

前後測（安全素養/反詐辨識）平均提升（≥ 25%）

參與者滿意度（≥ 4.3/5）

系統與治理（事）

回報→初審處理時間（Median ≤ 30 分鐘；依場域調整）

可驗證回報比例（≥ 60%）

誤報/濫用率（≤ 5%），且每案有稽核紀錄

重大事件演練（tabletop / drill）成功率（≥ 2 場、每場完成事後檢討）

擴散與可持續（組織）

夥伴機構數（≥ 4；台灣 2、蘇格蘭 2）

開源採用/衍生（≥ 2 個外部 fork 或部署案例）

發布年度成效報告（含指標、教案、治理規範）

（Global grant 一貫強調「可衡量、可持續」，且 scholarship 也要求嚴謹的支出追蹤與收據留存；常見做法是建立支出表並保留 US$75 以上收據。
rotary5495.org
+1
）

8) 12 個月里程碑（Milestones）

M1–M2：社區需求盤點 + 治理設計（2 地各完成 1 次需求訪談/工作坊）

M3：MVP 上線（回報、審核、CAP 警報生成、教育入口）

M4–M6：雙地試點準備 + 教材包 v1（含多語系/可及性）

M7–M9：雙地 Pilot（至少各 1 個場域；含演練與量測）

M10–M12：擴散與交付（成效報告、維運手冊、志工訓練師培）

9) 預算框架（摘要）

Global grant 有最低規模門檻（常見要求 總預算 ≥ US$30,000），資金由 DDF/現金/定向捐贈等組成，DDF 可獲 World Fund 配比。
扶輪國際
+1

（你談 scholarship 時的說法）學位資助是主體；服務/試點是「與 Areas of Focus 對齊的成果交付」，並在 grant 規範下執行、留存單據與報告。
rotaryfoundation6970.org
+1

12 個月可行開發計畫（工程落地版）
Phase 0（第 0–4 週）：對外可談的最小交付

交付物：

Project Charter：角色（你/Rotary sponsor/host partner/NGO）、決策權、資料倫理

Abuse & Safeguarding Policy：濫用案例、封鎖/申訴、透明度報告格式

技術決策：

事件分類（taxonomy）、風險分級（severity），與 CAP 映射規則

匿名/實名策略（預設匿名 + 可信度積分 + rate limit + evidence gating）

Phase 1（第 2–3 月）：MVP（可跑 pilot 的最小系統）

模組拆分（建議）

Intake：回報表單、附件、地點/時間（做最小化蒐集）

Triage：審核隊列、證據檢視、風險分級、封存/撤回

Alert Composer：CAP 產生器 + 發布工作流（草稿/審核/發布）

Education Hub：反詐/安全素養模組（文章+短測+演練腳本）

Audit & Metrics：事件稽核、KPI 儀表板、下載報告

里程碑：

單一部署環境（staging/prod）

基本觀測性（log/metrics/audit trail）

Phase 2（第 4–6 月）：教材化與可擴散（Supporting education 的關鍵）

交付物：

3 條教案（學生/通勤者/高齡者）+ 1 條志工訓練（train-the-trainer）

tabletop exercise 劇本（含評分表、事後檢討模板）

系統增強：

多語系（至少繁中/英文；若目標含新住民再加常用語）

可及性（WCAG 基礎：字級、對比、螢幕閱讀器）

Phase 3（第 7–9 月）：雙地 pilot（台北 + Glasgow/Scotland）

台灣端 pilot（建議場域型態）：校園/社區中心/通勤樞紐周邊 NGO 合作點

蘇格蘭端 pilot（建議場域型態）：校園社群 + 在地 NGO

每個 pilot 至少完成：

1 次演練（drill）

1 次工作坊（education module）

KPI baseline vs after（用同一份量測表）

Phase 4（第 10–12 月）：收斂、交付、永續

交付物：

年度成效報告（KPI、教案、治理成效、案例）

維運手冊（非工程者也能操作的 runbook）

Roadmap v2（擴點需求、責任移轉、成本模型）

風險控管（必做）

濫用回溯機制（audit）

資料最小化與刪除策略（保留期限、去識別化）
___
# ERH 群眾參與式安全決策系統 PoC

本專案包含一套針對四種高密度場域開發的 **群眾參與式安全決策系統 (Crowd-in-the-Loop Safety Decision System)** 完整概念驗證 (PoC) 實作：

1. **車站內部** (大廳 / 閘門 / 月台)
2. **列車車廂** (車廂內部)
3. **車站周邊** (車站出口、轉乘連通道、周邊區域)
4. **其他高密度區域** (活動現場、廣場、節慶、人流疏散點)

本 PoC 實作了兩種並行的公共通訊路徑：

- **路徑 1 (基準 / 免下載)：** 基於標準的公共告警發送 (如細胞廣播 / 適地性簡訊 LBS)，採用以 CAP (共通警報協定) 為核心的告警格式。
- **路徑 2 (App / 選用下載)：** 提供民眾下載的 App，支援雙向互動 (結構化群眾回報、個人化引導、回報平安)，同時具備濫用防止與隱私控制機制。

核心約束在於 **ERH 治理 (ERH Governance)**：隨著系統複雜度增加，關鍵錯誤判斷 (稱為「倫理質數 / Ethical Primes」) 必須被**可量化地限制**在特定範圍內，而非隨著規模無限制擴張。

## 系統架構

系統由以下組件構成：

- **後端 API** (Go/Gin): 具備 ERH 治理的核心安全決策系統。
- **前端網頁** (Next.js): 使用者介面與管理後台儀表板。
- **行動 App** (Flutter): 路徑 2 的行動應用程式。
- **資料庫** (PostgreSQL/TimescaleDB): 資料持久化。
- **快取** (Redis): 用於流量限制 (Rate limiting) 與快取。

### 架構圖

```mermaid
graph TB
    subgraph "使用者層"
        Client[網頁客戶端<br/>Next.js]
        Admin[管理後台<br/>Next.js]
        Mobile[行動 App<br/>Flutter Route 2]
    end

    subgraph "後端服務層"
        API[後端 API<br/>Go/Gin]

        subgraph "核心服務"
            Decision[決策狀態機<br/>D0-D6]
            Agg[信號聚合<br/>Aggregation]
            Trust[信任評分<br/>Trust Scoring]
            ERH[ERH 治理<br/>Ethical Primes]
            Gate[動作閘口<br/>Approval/TTL/Keepalive]
        end

        subgraph "路徑 1 (基準)"
            CAP[CAP 生成器<br/>Message Generator]
            Route1[Route 1 適配器<br/>Cell Broadcast/SMS/PA]
        end

        subgraph "路徑 2 (App)"
            Route2[Route 2 服務<br/>Guidance/Assistance]
            Push[推播服務<br/>Push Notifications]
        end

        Audit[稽核系統<br/>Audit & Evidence]
    end

    subgraph "資料層"
        DB[(PostgreSQL<br/>TimescaleDB)]
        Cache[(Redis<br/>Cache & Rate Limit)]
    end

    subgraph "外部通道"
        CB[細胞廣播<br/>Cell Broadcast]
        SMS[簡訊<br/>SMS]
        PA[廣播系統<br/>PA/Signage]
        Web[網頁/社群<br/>Web/Social]
    end

    Client -->|HTTP/HTTPS| API
    Admin -->|HTTP/HTTPS| API
    Mobile -->|HTTP/HTTPS| API

    API --> Decision
    API --> Agg
    API --> Trust
    API --> ERH
    API --> Gate
    API --> CAP
    API --> Route1
    API --> Route2
    API --> Push
    API --> Audit

    Decision --> Agg
    Decision --> ERH
    Decision --> Gate
    CAP --> Route1
    Route2 --> Push

    Agg --> DB
    Trust --> DB
    ERH --> DB
    Gate --> DB
    CAP --> DB
    Route2 --> DB
    Audit --> DB

    API --> Cache
    Trust --> Cache
    Gate --> Cache

    Route1 --> CB
    Route1 --> SMS
    Route1 --> PA
    Route1 --> Web

    Push --> Mobile
```

---

## 快速上手

### 前置需求

- Docker 與 Docker Compose
- Go 1.23+ (本地開發用)
- Node.js 20+ (前端開發用)
- Flutter 3.22+ (行動 App 開發用)

### 使用 Docker Compose (推薦)

1. **複製專案庫**

```bash
git clone <repository-url>
cd Taiwanese-Cultural-Heritage-based-Physical-Post-Quantom-Encryption-Method

```

2. **啟動所有服務**

```bash
docker-compose up -d

```

3. **存取服務**

- 前端介面: http://localhost:3000
- API 服務: http://localhost:8080
- API 健康檢查: http://localhost:8080/health

---

## 專案結構

```text
.
├── cmd/server/          # 後端服務入口點
├── internal/            # 後端核心實作
│   ├── handler/         # HTTP 處理程序
│   ├── service/         # 業務邏輯
│   ├── model/           # 資料模型
│   ├── decision/        # 決策狀態機
│   ├── erh/             # ERH 治理機制
│   ├── cap/             # CAP 告警訊息生成
│   ├── route1/          # 路徑 1 適配器
│   └── route2/          # 路徑 2 服務
├── frontend/            # Next.js 網頁應用程式
│   ├── src/app/         # 頁面 (客戶端與管理端)
│   └── src/lib/         # API 介面服務
├── mobile_app/          # Flutter 行動應用程式
├── database/            # 資料庫遷移腳本 (Migrations)
├── tests/               # Robot Framework 測試腳本
└── docs/                # 系統文件

```

---

## 功能特性

### 後端 (Backend)

- ✅ 信號聚合與信任評分
- ✅ 決策狀態機 (D0-D6)
- ✅ ERH 治理與倫理質數監控
- ✅ CAP 告警訊息自動生成
- ✅ 路徑 1 適配器 (細胞廣播、簡訊等)
- ✅ 路徑 2 API (引導、協助、回饋)
- ✅ 稽核日誌與證據存證存檔
- ✅ 高影響力動作閘口控管

### 前端 (Frontend)

- ✅ 用於查看 CAP 訊息的客戶端介面
- ✅ 即時監控管理後台儀表板
- ✅ 決策管理介面
- ✅ ERH 監測與指標統計
- ✅ 稽核日誌檢視器
- ✅ CAP 訊息管理

### 行動 App (Mobile App)

- ✅ 裝置註冊與驗證
- ✅ 結構化群眾回報功能
- ✅ 個人化疏散引導
- ✅ 協助請求發送
- ✅ 推播通知

---

## 測試說明

### 後端測試

```bash
go test ./...

```

### Robot Framework 自動化測試

```bash
cd tests
pip install -r requirements.txt
./run_tests.sh

```

---

## 授權與貢獻

詳情請參閱 [LICENSE.txt](https://www.google.com/search?q=./LICENSE.txt)。

> **注意：** 本專案為概念驗證 (PoC) 實作。若欲投入生產環境，請務必參考完整文件並確保符合所在地區的安全性、隱私權及法規合規性要求。

---

# ERH Crowd-in-the-Loop Safety Decision PoC

This repository contains a **complete Proof of Concept (PoC)** implementation for a **crowd-in-the-loop safety decision system** across four high-density zones:

1. **Station Interior** (concourse / gates / platforms)
2. **Train Car** (inside carriage)
3. **Station Perimeter** (station surroundings, entrances/exits, transfer corridors)
4. **Other High-Density Areas** (events, plazas, festivals, dispersal flows)

The PoC implements two public-communication routes that coexist:

- **Route 1 (Baseline / No Download):** Standards-based public warning delivery (e.g., cell broadcast / location-based SMS) with a CAP-centered alert format.
- **Route 2 (App / Optional Download):** A public app that enables bidirectional interactions (structured crowd reports, personalized guidance, check-in), while adding abuse and privacy controls.

A core constraint is **ERH governance**: as system complexity increases, critical misjudgments ("ethical primes") must remain **measurably bounded** rather than exploding with scale.

## Architecture

The system consists of:

- **Backend API** (Go/Gin): Core safety decision system with ERH governance
- **Frontend Web** (Next.js): Client-facing interface and admin dashboard
- **Mobile App** (Flutter): Route 2 mobile application
- **Database** (PostgreSQL/TimescaleDB): Data persistence
- **Cache** (Redis): Rate limiting and caching

### Architecture Diagram

```mermaid
graph TB
    subgraph "User Layer"
        Client[Web Client<br/>Next.js]
        Admin[Admin Dashboard<br/>Next.js]
        Mobile[Mobile App<br/>Flutter Route 2]
    end

    subgraph "Backend Service Layer"
        API[Backend API<br/>Go/Gin]
        
        subgraph "Core Services"
            Decision[Decision State Machine<br/>D0-D6]
            Agg[Signal Aggregation<br/>Aggregation Engine]
            Trust[Trust Scoring<br/>Trust Scorer]
            ERH[ERH Governance<br/>Ethical Primes]
            Gate[Action Gating<br/>Approval/TTL/Keepalive]
        end
        
        subgraph "Route 1 (Baseline)"
            CAP[CAP Generator<br/>Message Generator]
            Route1[Route 1 Adapters<br/>Cell Broadcast/SMS/PA]
        end
        
        subgraph "Route 2 (App)"
            Route2[Route 2 Services<br/>Guidance/Assistance]
            Push[Push Service<br/>Push Notifications]
        end
        
        Audit[Audit System<br/>Audit & Evidence]
    end

    subgraph "Data Layer"
        DB[(PostgreSQL<br/>TimescaleDB)]
        Cache[(Redis<br/>Cache & Rate Limit)]
    end

    subgraph "External Channels"
        CB[Cell Broadcast<br/>Cell Broadcast]
        SMS[SMS<br/>SMS]
        PA[PA System<br/>PA/Signage]
        Web[Web/Social<br/>Web/Social]
    end

    Client -->|HTTP/HTTPS| API
    Admin -->|HTTP/HTTPS| API
    Mobile -->|HTTP/HTTPS| API

    API --> Decision
    API --> Agg
    API --> Trust
    API --> ERH
    API --> Gate
    API --> CAP
    API --> Route1
    API --> Route2
    API --> Push
    API --> Audit

    Decision --> Agg
    Decision --> ERH
    Decision --> Gate
    CAP --> Route1
    Route2 --> Push

    Agg --> DB
    Trust --> DB
    ERH --> DB
    Gate --> DB
    CAP --> DB
    Route2 --> DB
    Audit --> DB

    API --> Cache
    Trust --> Cache
    Gate --> Cache

    Route1 --> CB
    Route1 --> SMS
    Route1 --> PA
    Route1 --> Web

    Push --> Mobile
```

## Quick Start

### Prerequisites

- Docker and Docker Compose
- Go 1.23+ (for local development)
- Node.js 20+ (for frontend development)
- Flutter 3.22+ (for mobile app development)

### Using Docker Compose (Recommended)

1. **Clone the repository**

   ```bash
   git clone <repository-url>
   cd Taiwanese-Cultural-Heritage-based-Physical-Post-Quantom-Encryption-Method
   ```

2. **Start all services**

   ```bash
   docker-compose up -d
   ```

3. **Access the services**
   - Frontend: http://localhost:3000
   - API: http://localhost:8080
   - API Health: http://localhost:8080/health

### Local Development

#### Backend

```bash
# Install dependencies
go mod download

# Set up environment variables
export DATABASE_URL=postgres://postgres:postgres@localhost:5432/erh_safety?sslmode=disable
export REDIS_URL=redis://localhost:6379

# Run database migrations
# (using your preferred migration tool)

# Start the server
go run cmd/server/main.go
```

#### Frontend

```bash
cd frontend

# Install dependencies
npm install

# Set environment variables
export NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1

# Start development server
npm run dev
```

#### Mobile App

```bash
cd mobile_app

# Install dependencies
flutter pub get

# Run on device/emulator
flutter run
```

## Project Structure

```
.
├── cmd/server/          # Backend server entry point
├── internal/            # Backend implementation
│   ├── handler/        # HTTP handlers
│   ├── service/        # Business logic
│   ├── model/          # Data models
│   ├── decision/       # Decision state machine
│   ├── erh/            # ERH governance
│   ├── cap/            # CAP message generation
│   ├── route1/         # Route 1 adapters
│   └── route2/         # Route 2 services
├── frontend/            # Next.js web application
│   ├── src/app/        # Pages (client & admin)
│   └── src/lib/        # API services
├── mobile_app/          # Flutter mobile application
├── database/            # Database migrations
├── tests/               # Robot Framework tests
└── docs/                # Documentation
```

## Features

### Backend

- ✅ Signal aggregation and trust scoring
- ✅ Decision state machine (D0-D6)
- ✅ ERH governance and ethical primes
- ✅ CAP message generation
- ✅ Route 1 adapters (Cell Broadcast, SMS, etc.)
- ✅ Route 2 API (guidance, assistance, feedback)
- ✅ Audit logging and evidence archiving
- ✅ High-impact action gating

### Frontend

- ✅ Client interface for CAP message viewing
- ✅ Admin dashboard with real-time monitoring
- ✅ Decision management interface
- ✅ ERH monitoring and metrics
- ✅ Audit log viewer
- ✅ CAP message management

### Mobile App

- ✅ Device registration and authentication
- ✅ Structured crowd reporting
- ✅ Personalized guidance
- ✅ Assistance requests
- ✅ Push notifications

## API Documentation

The API follows RESTful conventions and is documented through:

- OpenAPI/Swagger (if configured)
- Handler code with request/response structures
- See `internal/handler/` for endpoint implementations

Main API groups:

- `/api/v1/dashboard` - Dashboard data
- `/api/v1/operator` - Operator decision endpoints
- `/api/v1/cap` - CAP message endpoints
- `/api/v1/route2` - Route 2 App endpoints
- `/api/v1/erh` - ERH governance endpoints
- `/api/v1/audit` - Audit and evidence endpoints

## Testing

### Backend Tests

```bash
go test ./...
```

### Robot Framework Tests

```bash
cd tests
pip install -r requirements.txt
./run_tests.sh
```

## CI/CD

The project includes GitHub Actions workflows for:

- Go tests and linting
- Docker image building
- Flutter app building (Android & iOS)
- Robot Framework tests

See `.github/workflows/` for details.

## Documentation

- [`docs/`](./docs/) - Complete system documentation
- [`plan.md`](./plan.md) - PoC plan and milestones
- [`agent.md`](./agent.md) - Agent roles and constraints
- [`structure.md`](./structure.md) - Repository structure

## License

See [LICENSE.txt](./LICENSE.txt) for license information.

## Contributing

This is a PoC implementation. For production use, please refer to the documentation and ensure all security, privacy, and compliance requirements are met.
